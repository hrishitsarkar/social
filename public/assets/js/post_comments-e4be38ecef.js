class PostComments{constructor(t){this.postId=t,this.postContainer=$(`#post-${t}`),this.newCommentForm=$(`#post-${post._id}-comments-form`),this.createComment(t);let e=this;$(" .del-cmnt",this.postContainer).each((function(){e.deleteComment($(this))}))}createComment(t){let e=this;this.newCommentForm.submit((function(o){o.preventDefault(),console.log("inside the comment submit");$.ajax({type:"POST",url:"/comments/create",data:$(this).serialize(),success:function(o){let n=e.newCommentDom(o.data.comments);$(`#post-comments-${t}`).prepend(n),e.deleteComment($(".del-cmnt",n)),new ToggleLike($(" .toggle-like-button",n)),new Noty({theme:"relax",text:"Comment published!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))}newCommentDom(t){return $(`<li id="comment-${t._id}">\n\t\t<h3>${t.user.name}</h3>\n\t\t <p>${t.content}</p>\n\t\t \n\t\t   <a  class="toggle-like-btn" href="/likes/toggle?id=${t._id}&type=Comment" data-likes = "${t.likes.length}">${t.likes.length}<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Facebook_Thumb_icon.svg/1200px-Facebook_Thumb_icon.svg.png" alt="likes"></a>\n\t\t   \n\t\t\t   ${t.likes.length}\n\t\t\t   \n\t\t \n\t\t\t<p><a class="del-cmnt" href="/comments/destroy/${t.id}">Delete</a></p>\n\t\t\t\n\t  </li>`)}deleteComment(t){$(t).click((function(e){e.preventDefault(),$.ajax({type:"GET",url:$(t).prop("href"),success:function(t){$(`#comment-${t.data.comment._id}`).remove(),new Noty({theme:"relax",text:"Comment Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})}))}}